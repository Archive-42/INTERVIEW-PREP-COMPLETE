if (self.CavalryLogger) { CavalryLogger.start_js(["elpwU"]); }

__d("CometAnimatedImagePickerSearchResultsRootQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"media_height"},b={defaultValue:null,kind:"LocalArgument",name:"media_width"},c={defaultValue:null,kind:"LocalArgument",name:"query_type"},d={defaultValue:null,kind:"LocalArgument",name:"result_types"},e={defaultValue:null,kind:"LocalArgument",name:"scale"},f={defaultValue:null,kind:"LocalArgument",name:"search_query"},g=[{kind:"Literal",name:"count",value:40},{kind:"Variable",name:"media_height",variableName:"media_height"},{kind:"Variable",name:"media_scale",variableName:"scale"},{kind:"Variable",name:"media_width",variableName:"media_width"},{kind:"Variable",name:"query",variableName:"search_query"},{kind:"Variable",name:"query_type",variableName:"query_type"},{kind:"Variable",name:"result_types",variableName:"result_types"}],h={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:g,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometAnimatedImagePickerSearchResults_results"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,f,b,a,e],kind:"Operation",name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:g,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},h,i,j,k,l],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[h,i,j,k,l,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],storageKey:null}]},params:{id:"2959184444193590",metadata:{},name:"CometAnimatedImagePickerSearchResultsRootQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometAnimatedImagePickerSearchResults_results.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResults_results",selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},a,b,c,d,e],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[a,b,c,d,e,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],type:"MessengerPlatformResponse",abstractKey:null}}();e.exports=a}),null);
__d("CometAnimatedImagePickerSearchResult.react",["fbt","CometImage.react","CometPressable.react","React"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.desiredWidth,d=a.image,e=a.onSelect;a=h.useCallback(function(){return e(d)},[d,e]);var f=d.source.width,i=d.source.height;f=c/f;return h.jsx(b("CometPressable.react"),{"aria-label":g._("GIF"),onPress:a,overlayDisabled:!0,children:h.jsx(b("CometImage.react"),{height:i*f,src:d.source.url,width:c})})}}),null);
__d("CometPickerNullStateContainer.react",["CometColumn.react","CometColumnItem.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.notExpanding;d=d===void 0?!1:d;a=a.xstyle;return g.jsx(b("CometColumn.react"),{align:"center",expanding:!d,verticalAlign:"center",xstyle:a,children:g.jsx(b("CometColumnItem.react"),{children:c})})}}),null);
__d("CometPickerNullState.react",["CometPickerNullStateContainer.react","React","TetraNullState.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.headline;c=c===void 0?null:c;var d=a.notExpanding;d=d===void 0?!1:d;var e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["headline","notExpanding","xstyle"]);return g.jsx(b("CometPickerNullStateContainer.react"),{notExpanding:d,xstyle:e,children:g.jsx(b("TetraNullState.react"),babelHelpers["extends"]({},a,{bodyColor:"tertiary",headline:c}))})}c=g.memo(a);e.exports=c}),null);
__d("CometAnimatedImagePickerSearchResults.react",["fbt","CometAnimatedImagePickerSearchResult.react","CometPickerNullState.react","CometPickerScrollableArea.react","CometRelay","NullStateMedia","React","getJSEnumSafe","CometAnimatedImagePickerSearchResults_results.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=5;function a(a){var c,d,e=b("CometRelay").useFragment(h!==void 0?h:h=b("CometAnimatedImagePickerSearchResults_results.graphql"),a.results),f=(c=e==null?void 0:(c=e.result_group)==null?void 0:(c=c[0])==null?void 0:c.results.length)!=null?c:0;c=i.useState(j);var k=c[0],l=c[1];c=i.useCallback(function(){return l(function(a){return Math.min(a+j,f)})},[f]);d=e==null?void 0:(d=e.result_group[0])==null?void 0:(d=d.results[0])==null?void 0:d.result_id;var m=i.useState(null),n=m[0];m=m[1];n!==d&&(m(d),l(j));var o={ANIMATION:1,PHOTO:0,STICKER:3,VIDEO:2};if(!e||!e.result_group||e.result_group.length===0||!e.result_group[0])return i.jsx(b("CometPickerNullState.react"),{body:g._("No GIFs to show"),icon:b("NullStateMedia")});n=e.result_group[0].results;var p=e.result_next_cursor;m=n.map(function(c,d){var e,f=c.media[0],g=c.source;if(f==null||g==null)return;if(d>k)return null;f={preview:{durationMs:(d=f.duration_ms)!=null?d:0,height:(d=f.height)!=null?d:0,label:(d=f.label)!=null?d:null,sizeBytes:(d=f.size_bytes)!=null?d:0,url:(d=g.url)!=null?d:"",width:(d=f.width)!=null?d:0}};g={durationMs:(d=g.duration_ms)!=null?d:0,height:(d=g.height)!=null?d:0,mimeType:(d=g.mime_type)!=null?d:"",sizeBytes:(d=g.size_bytes)!=null?d:0,url:(d=g.url)!=null?d:"",width:(d=g.width)!=null?d:0};d=(d=c.result_type)!=null?d:"ANIMATION";return i.jsx(b("CometAnimatedImagePickerSearchResult.react"),{desiredWidth:a.desiredWidth,image:{cursor:(e=p)!=null?e:"",media:f,platformFBID:(e=c.app_fbid)!=null?e:"",resultID:(f=c.result_id)!=null?f:"",source:g,type:(e=b("getJSEnumSafe")(o,d))!=null?e:1},onSelect:a.onSelect},(f=c.result_id)!=null?f:void 0)});return i.jsx(b("CometPickerScrollableArea.react"),{horizontal:!1,onScrollBottom:c,scrollKey:a.scrollKey,xstyle:a.xstyle,children:m})}}),null);
__d("CometAnimatedImagePickerSearchResultsRoot.react",["CometAnimatedImagePickerSearchResults.react","CometErrorBoundary.react","CometRelay","React","WebPixelRatio","useInvalidNumberThrowsViolation","CometAnimatedImagePickerSearchResultsRootQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function i(a){var c=a.mediaHeight,d=a.mediaWidth,e=a.onSelect,f=a.searchQuery;a=a.xstyle;b("useInvalidNumberThrowsViolation")(d);var i=h.useMemo(function(){return{media_height:c,media_width:d,query_type:f===""?"TRENDING":"SEARCH",result_types:["ANIMATION"],scale:b("WebPixelRatio").get(),search_query:f}},[c,d,f]),j=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("CometAnimatedImagePickerSearchResultsRootQuery.graphql"),i);return j.comet_external_media==null?null:h.jsx(b("CometAnimatedImagePickerSearchResults.react"),{desiredWidth:i.media_width,onSelect:e,results:j.comet_external_media,scrollKey:f,xstyle:a})}function a(a){return h.jsx(b("CometErrorBoundary.react"),{children:h.jsx(i,babelHelpers["extends"]({},a))})}}),null);
__d("CometAnimatedImagePickerCard.react",["CometAnimatedImagePickerSearchResultsRoot.react","React","useDebouncedValue"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.mediaHeight,d=a.mediaWidth,e=a.onSelect,f=a.searchQuery;a=a.xstyle;return g.jsx(b("CometAnimatedImagePickerSearchResultsRoot.react"),{mediaHeight:c,mediaWidth:d,onSelect:e,searchQuery:b("useDebouncedValue")(f,200),xstyle:a})}}),null);
__d("CometPickerBasicStackingLayout.react",["CometColumn.react","CometColumnItem.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=c.content,e=c.footer;c=c.header;var f=a.expanding,h=a.testid;h=a.xstyle;return g.jsxs(b("CometColumn.react"),{expanding:f,testid:void 0,xstyle:h,children:[g.jsx(b("CometColumnItem.react"),{children:c}),g.jsx(b("CometColumnItem.react"),{expanding:!0,children:d}),g.jsx(b("CometColumnItem.react"),{children:e})]})}}),null);
__d("CometUFIAnimatedImagePickerCard.react",["CometAnimatedImagePickerCard.react","CometColumn.react","CometColumnItem.react","CometPickerBasicStackingLayout.react","CometPickerSearchBox.react","CometPlaceholder.react","CometProgressIndicator.react","React","gkx","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("gkx")("1299319"),i=274,j={popover:{height:"j707pzvn",width:"hdkcmrsv"},scrollableAreaForIE11:{height:"sgwjjusx"}};function a(a){var c=a.onClose,d=a.onSelect;a=g.useCallback(function(a){c(),d(a)},[c,d]);var e=g.useState(""),f=e[0];e=e[1];return g.jsx(b("CometPickerBasicStackingLayout.react"),{xstyle:j.popover,children:{content:g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(b("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:g.jsx(b("CometColumnItem.react"),{children:g.jsx(b("CometProgressIndicator.react"),{})})}),children:g.jsx(b("CometAnimatedImagePickerCard.react"),{mediaWidth:i,onSelect:a,searchQuery:f,xstyle:h&&j.scrollableAreaForIE11})}),header:g.jsx(b("CometPickerSearchBox.react"),{searchQuery:f,setSearchQuery:e},0)}})}}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("CometUFIGIFPickerPopover.stable.react",["CometPopover.react","CometUFIAnimatedImagePickerCard.react","React","XUFICommentGIFPreprocessController","cometAsyncFetch","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.onClose,d=a.onComposerStateChange;a=g.useCallback(function(a){b("promiseDone")(b("cometAsyncFetch")(b("XUFICommentGIFPreprocessController").getURIBuilder().getURI().toString(),{data:{gif_url:a.source.url},method:"POST"})),d(function(b){return{attachment:{__type:"GIF",data:a}}}),c()},[c,d]);return g.jsx(b("CometPopover.react"),{withArrow:!0,children:g.jsx(b("CometUFIAnimatedImagePickerCard.react"),{onClose:c,onSelect:a})})}}),null);