if (self.CavalryLogger) { CavalryLogger.start_js(["XSNSK"]); }

__d("CometProfilePhoto_EXPERIMENTAL.react",["CometBadgeContainer.react","CometImage.react","CometImageContainer.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h={photo:{display:"a8c37x1j",maxWidth:"d2edcug0",minHeight:"sn7ne77z",objectFit:"bixrwtb6"}};function a(a){var c=a.alt,d=a.badge,e=a.badgeAlign,f=a.disabled;f=f===void 0?!1:f;var i=a.shape;i=i===void 0?"square":i;var j=a.size;a=a.source;j=g.jsx(b("CometImageContainer.react"),babelHelpers["extends"]({},j==="fill"?{aspectRatio:1}:{size:j},{disabled:f,shape:i,children:g.jsx(b("CometImage.react"),{alt:c,src:a,xstyle:h.photo})}));return d!=null?g.jsx(b("CometBadgeContainer.react"),{badge:d,badgeAlign:e,children:j}):j}}),null);
__d("CometFacepilePhoto.react",["BaseView.react","CometBadgeContainer.react","CometProfilePhoto_EXPERIMENTAL.react","React","TetraText.react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={item:{position:"pmk7jnqg"},moreItem:{alignItems:"bp9cbjyn",backgroundColor:"tdjehn4e",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",display:"j83agx80",flexDirection:"cbu4d94t",height:"datstx6m",justifyContent:"taijpn5t"},moreItemFontWeight:{fontWeight:"lrazzd5p"},moreItemInsetBorder:{borderTopStartRadius:"n00je7tq",borderTopEndRadius:"arfg74bv",borderBottomEndRadius:"qs9ysxi8",borderBottomStartRadius:"k77z8yql",bottom:"i09qtzwb",boxShadow:"oaz4zybt",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"}},j={40:{height:"qypqp5cg",width:"q676j6op"},60:{height:"cb02d2ww",width:"ljni7pan"},72:{height:"rdkrh8wx",width:"orwu60u2"},80:{height:"pioscnbf",width:"etr7akla"}},k={1:{height:"datstx6m",width:"k4urcfbm"},2:{height:"fbtcaa4l",width:"obxclzj5"},3:{height:"h8rzmyi8",width:"aunhd4fo"},4:{height:"h8rzmyi8",width:"aunhd4fo"}},l={0:{borderTopColor:"np69z8it",borderEndColor:"et4y5ytx",borderBottomColor:"j7g94pet",borderStartColor:"b74d5cxt",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",borderTopStyle:"goun2846",borderEndStyle:"ccm00jje",borderBottomStyle:"s44p3ltw",borderStartStyle:"mk2mc5f4",borderTopWidth:"qxh1up0x",borderEndWidth:"qtyiw8t4",borderBottomWidth:"tpcyxxvw",borderStartWidth:"k0bpgpbk",bottom:"i09qtzwb",boxSizing:"cjfnh4rs",marginTop:"hop8lmos",marginEnd:"nkwizq5d",marginBottom:"scwd0bx6",marginStart:"roh60bw9",start:"j9ispegn",zIndex:"tkr6xdv7"},1:{end:"n7fi1qx3",top:"kr520xx4"}},m={0:{left:"pzli0o6b",top:"hmalg0qr",transform:"cj5g2342"},1:{bottom:"rwy7c4ue",start:"mmfdhihy"},2:{bottom:"rwy7c4ue",end:"tdcub1r8"}},n={0:{start:"mmfdhihy",top:"hmalg0qr"},1:{bottom:"rwy7c4ue",start:"mmfdhihy"},2:{end:"tdcub1r8",top:"hmalg0qr"},3:{bottom:"rwy7c4ue",end:"tdcub1r8"}};function a(a){var c=a.badge,d=a.badgeAlign,e=a.expanding;e=e===void 0?!1:e;var f=a.size,o=a.sources;a=a.totalItems;var p=a>o.length||o.length>4,q=Math.min(o.length+(p?1:0),4);o=o.slice(0,p?q-1:q).map(function(a){return h.jsx(b("CometProfilePhoto_EXPERIMENTAL.react"),babelHelpers["extends"]({},typeof a==="object"?a:{source:a},{shape:"circle",size:"fill"}))});if(p){p=h.jsxs(b("BaseView.react"),{xstyle:i.moreItem,children:[h.jsx(b("TetraText.react"),{color:"secondary",type:"meta4",children:h.jsxs("span",{className:(g||(g=b("stylex")))(i.moreItemFontWeight),children:["+",a-q+1]})}),h.jsx(b("BaseView.react"),{xstyle:i.moreItemInsetBorder})]},"more");q===4?o.splice(-1,0,p):o.push(p)}a=h.jsx(b("BaseView.react"),{xstyle:j[f],children:o.map(function(a,c){return h.jsx(b("BaseView.react"),{xstyle:[i.item,k[q],q===4&&n[c]||q===3&&m[c]||q===2&&l[c]],children:a},c)})});return c!=null?h.jsx(b("CometBadgeContainer.react"),{badge:c,badgeAlign:d,expanding:e,children:a}):a}}),null);
__d("CometOnOutsideClick.react",["React","useOnOutsideClick"],(function(a,b,c,d,e,f){"use strict";e.exports=a;b("React");function a(a){var c=a.children;a=a.onOutsideClick;a=b("useOnOutsideClick")(a);return c(a)}}),null);
__d("LSThreadTitle.bs",["fbt","bs_curry","bs_int64","React","gkx","intlList","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_caml_option","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWChatTextTransform.bs","recoverableViolation","LSMessagingThreadTypeUtil.bs","CometTextWithEntities.react","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=[b("MWChatTextTransform.bs").emojiTransform,b("MWChatTextTransform.bs").emoticonTransform];function j(a){var c=a.thread;a=a.wrapOutput;var d=c.a,e=b("bs_int64").to_string(d),f=b("SkytaleDBHook.bs").useHook(void 0),j=b("MWLSActor.bs").useActor(void 0),k=b("gkx")("1846003"),l=b("SkytaleDBQuerySubscriptionHook.bs").useArray(h.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(f,"participants").asc,{hd:d,tl:0}),function(a){var c=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(f,"contacts").asc,{hd:a.b,tl:0}));return[a,c]})},[f,e]));if(l.length===0){b("recoverableViolation")("No participants found","messenger_comet");return""}if(b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.c)){if(l.length===1){e=l[0];c=e[1];e=c!==void 0?c.h:g._("Facebook User").toString();return h.jsx(b("CometTextWithEntities.react"),{text:e,transforms:i})}c=l.filter(function(a){return b("bs_caml_int64").neq(a[0].b,j)});if(c.length===0){b("recoverableViolation")("multiple viewers in 1:1 thread","messenger_comet");return""}e=c[0];var m=e[0].e,n,o=0;m!==void 0&&k?n=m:o=1;if(o===1){m=e[1];n=m!==void 0?m.h:g._("Facebook User").toString()}o=h.jsx(b("CometTextWithEntities.react"),{text:n,transforms:i});e=c[0];if(a===void 0)return o;m=e[1];if(m!==void 0)return b("bs_curry")._3(a,m,e[0],o);else return o}if(l.length===1){c=l[0];a=c[1];m=a!==void 0?a.h:"";return h.jsx(b("CometTextWithEntities.react"),{text:m,transforms:i})}e=l.filter(function(a){return b("bs_caml_int64").neq(a[0].b,j)}).sort(function(a,b){b=b[1];a=a[1];if(a!==void 0)if(b!==void 0)return b.o-a.o;else return 0;else return 0}).map(function(b){var a=b[0].e;if(a!==void 0&&k)return a;a=b[1];if(a===void 0)return g._("Facebook User").toString();b=a.p;if(b!==void 0&&l.length>2)return b;else return a.h});o=b("intlList")(e,b("intlList").CONJUNCTIONS.NONE,b("intlList").DELIMITERS.COMMA).toString();return h.jsx(b("CometTextWithEntities.react"),{text:o,transforms:i})}c={make:j};function a(a){var c=a.thread;a=a.wrapOutput;var d=c.d;if(d!==void 0)return h.jsx(b("CometTextWithEntities.react"),{text:d,transforms:i});d={thread:c};a!==void 0&&(d.wrapOutput=b("bs_caml_option").valFromOption(a));return h.jsx(j,d)}d=a;f.transforms=i;f.ComputedThreadName=c;f.make=d}),null);
__d("MWPresenceBadge.bs",["React","SkytaleDB","bs_caml_int64","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","CometBadge.react","MWChatContactPresenceHook.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.thread;a=a.size;var d=b("SkytaleDBHook.bs").useHook(void 0),e=c.a;c=g.useMemo(function(){var a=b("SkytaleDBExec.bs").firstExn(b("SkytaleDBQuery.bs").map(b("SkytaleDB").table(d,"_user_info").asc,function(a){return a.b}));return b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(d,"participants").asc,{hd:e,tl:0}),function(c){return b("bs_caml_int64").neq(c.b,a)})},[d,JSON.stringify(e)]);c=b("SkytaleDBQuerySubscriptionHook.bs").useArray(c);c=c.map(function(a){return a.b});c=b("MWChatContactPresenceHook.bs").useHasActiveContact(c);if(c)return g.jsx(b("CometBadge.react"),{color:"green",isProfileBadge:!0,border:"white",size:a});else return null}c=a;f.make=c}),null);
__d("MWThreadPicture.bs",["React","MWLSActor.bs","SkytaleDB","bs_belt_Array","bs_caml_int64","bs_belt_Option","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWPresenceBadge.bs","CometPlaceholder.react","CometFacepilePhoto.react","RecoverableViolation.react","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=a.thread;a=a.size;return g.jsx(b("CometPlaceholder.react"),{children:g.jsx(b("MWPresenceBadge.bs").make,{thread:c,size:a}),fallback:null})}c={make:h};function i(a){var c=a.thread,d=a.photoSize;a=a.badgeSize;var e=b("SkytaleDBHook.bs").useHook(void 0),f=c.a,i=g.useMemo(function(){return b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"participants").asc,{hd:f,tl:0}),b("SkytaleDB").table(e,"contacts").asc)},[e,JSON.stringify(f)]),j=b("MWLSActor.bs").useActor(void 0);i=b("SkytaleDBQuerySubscriptionHook.bs").useArray(i);var k=i.length;if(k>=3){var l=i.filter(function(a){return b("bs_caml_int64").neq(a[1].a,j)}).sort(function(a,b){return b[1].o-a[1].o}),m=b("bs_belt_Array").get(l,0);l=b("bs_belt_Array").get(l,1);if(m!==void 0&&l!==void 0){l=l[1];m=m[1];return g.jsx(b("CometFacepilePhoto.react"),{sources:[{alt:m.h,disabled:!1,source:m.b},{alt:l.h,disabled:!1,source:l.b}],badge:g.jsx(h,{thread:c,size:a}),size:function(){switch(d){case"s_40":return 40;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:2})}return g.jsx(b("RecoverableViolation.react"),{errorMessage:"no 2 other non-viewer participants?!",projectName:"messenger_comet"})}switch(k){case 0:return null;case 1:m=i[0];l=m[1];return g.jsx(b("CometFacepilePhoto.react"),{sources:[{alt:l.h,disabled:!1,source:l.b}],badge:g.jsx(h,{thread:c,size:a}),size:function(){switch(d){case"s_40":return 40;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:1});case 2:k=i.find(function(a){return b("bs_caml_int64").neq(a[1].a,j)});if(k===void 0)return g.jsx(b("RecoverableViolation.react"),{errorMessage:"no other non-viewer participant?!",projectName:"messenger_comet"});m=k[1];return g.jsx(b("CometFacepilePhoto.react"),{sources:[{alt:m.h,disabled:!1,source:m.b}],badge:g.jsx(h,{thread:c,size:a}),size:function(){switch(d){case"s_40":return 40;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:1})}}d={make:i};function a(a){var c=a.photoSize,d=a.badgeSize;a=a.thread;var e=a.f;if(e!==void 0)return g.jsx(b("CometFacepilePhoto.react"),{sources:[{alt:b("bs_belt_Option").getWithDefault(a.d,""),disabled:!1,source:e}],badge:g.jsx(h,{thread:a,size:d}),size:function(){switch(c){case"s_40":return 40;case"s_60":return 60;case"s_72":return 72;case"s_80":return 80}}(),totalItems:1});else return g.jsx(i,{thread:a,photoSize:c,badgeSize:d})}e=a;f.Badge=c;f.Facepile=d;f.make=e}),null);
__d("LSContextBanner.bs",["React","stylex","LSBitOffset.bs","LSThreadTitle.bs","MWThreadPicture.bs","TetraText.react","LSThreadCapabilityBitOffset.bs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={context:{flexShrink:"pfnyh3mw",backgroundColor:"nred35xi"},root:{paddingTop:"aodizinl",paddingEnd:"d1544ag0",paddingBottom:"osnr6wyh",paddingStart:"tw6a2znq"},image:{display:"j83agx80",justifyContent:"taijpn5t",marginBottom:"n851cfcs"},text:{paddingBottom:"f10w8fjw"}};function j(a){a=a.thread;var c=a.F,d=a.D,e=a.B;return h.jsx("div",{children:h.jsxs("div",{children:[h.jsx("div",{children:h.jsx(b("MWThreadPicture.bs").make,{photoSize:"s_60",badgeSize:14,thread:a}),className:(g||(g=b("stylex")))(i.image)}),h.jsx("div",{children:h.jsx(b("TetraText.react"),{align:"center",type:"headlineEmphasized3",children:h.jsx(b("LSThreadTitle.bs").make,{thread:a,wrapOutput:function(a,b,c){return c}})}),className:g(i.text)}),e!==void 0?h.jsx("div",{children:h.jsx(b("TetraText.react"),{align:"center",color:"secondary",type:"body4",children:e}),className:(g||(g=b("stylex")))(i.text)}):null,d!==void 0?h.jsx("div",{children:h.jsx(b("TetraText.react"),{align:"center",color:"secondary",type:"body4",children:d}),className:(g||(g=b("stylex")))(i.text)}):null,c!==void 0?h.jsx("div",{children:h.jsx(b("TetraText.react"),{align:"center",color:"secondary",type:"body4",children:c}),className:(g||(g=b("stylex")))(i.text)}):null],className:g(i.root)}),className:g(i.context)})}c={styles:i,make:j};function a(a){a=a.thread;var c=b("LSBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").disableContextBanner,a.P);if(c)return null;else return h.jsx(j,{thread:a})}d=a;f.Impl=c;f.make=d}),null);
__d("XCometWorkChatControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f){a=b("jsRouteBuilder")("/chat/t/{?thread_key}/",Object.freeze({new_room:!1}),new Set(["new_room"]));c=a;e.exports=c}),null);
__d("MWInboxThreadMessagesSpinner.bs",["bs_curry","React","stylex","useVisibilityObserver","CometHeroHoldTrigger.react","CometProgressRingIndeterminate.react"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={mask:{backgroundColor:"nred35xi"},spinner:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",height:"rgmg9uty",flexBasis:"rj1gh0hx",flexGrow:"buofh1pr",flexShrink:"pfnyh3mw",paddingTop:"pybr56ya",paddingBottom:"f10w8fjw"},spinnerPlaceholder:{height:"rgmg9uty",width:"k4urcfbm",backgroundColor:"nred35xi"},spinnerInline:{height:"rgmg9uty",minHeight:"dumg13m2",paddingTop:"jktsbyx5",paddingBottom:"osnr6wyh"}};function a(a){a=a.inline;a=a!==void 0?a:!1;var c=h.useState(function(){return!1}),d=c[1];c=c[0];var e=b("useVisibilityObserver")({onHidden:function(a){return b("bs_curry")._1(d,function(a){return!1})},onVisible:function(a){return b("bs_curry")._1(d,function(a){return!0})}});return h.jsxs(h.Fragment,{children:[h.jsx(b("CometHeroHoldTrigger.react"),{description:"MWChatSpinner",hold:c}),h.jsx("div",{children:c?h.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24}):h.jsx("div",{className:(g||(g=b("stylex")))(i.spinnerPlaceholder)}),ref:e,className:(g||(g=b("stylex")))(i.spinner,i.mask,a?i.spinnerInline:!1)})]})}c=a;f.styles=i;f.make=c}),null);
__d("MWChatThread.bs",["fbt","React","gkx","MWTheme.bs","SkytaleDB","stylex","bs_caml_option","MWThreadKey.bs","requireCond","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSContextBanner.bs","MWChatThreadPos.bs","MWUIQuickReplies.bs","MWChatMessageList.bs","focusScopeQueries","MWMessageElementRefList.bs","MWLSThreadHasMoreMessages.bs","BaseHeadingContextWrapper.re","MWChatMessageTableFocusTable.bs","MWInboxThreadMessagesSpinner.bs","MWChatViewerChatVisibilityHook","SkytaleDBQuerySubscriptionHook.bs","VideoPlayerAutoplayRulesProvider","MWChatConversationScroller_DEPRECATED.bs","VideoAutoplayLocalScopeProvider.react","cr:1780086","cr:1780087"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=g._("Messages"),k={spacer:{flexBasis:"rj1gh0hx",flexGrow:"buofh1pr"},mask:{backgroundColor:"nred35xi"}};c={};d={};function a(a){var c=a.items,d=a.isScrolledToBottomRef,e=a.setCovidSheet,f=a.dispatch,g=a.managePageMessagesLink,l=a.spacerRef,m=a.scrollerRef,n=a.buildSharedMediaViewerURL,o=a.forceContextBanner;a=a.showInlineSpinner;var p=g!==void 0?b("bs_caml_option").valFromOption(g):null;g=o!==void 0?o:!1;o=a!==void 0?a:!1;var q=b("SkytaleDBHook.bs").useHook(void 0),r=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(i.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(q,"threads").asc,{hd:r,tl:0})},[q,r]));var s=b("MWTheme.bs").useTheme(void 0),t=b("MWChatThreadPos.bs").useThreadPosition(void 0),u=t[0],v=b("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed"),w=b("MWLSThreadHasMoreMessages.bs").useThreadHasMoreMessages(void 0),x=c.map(function(c,d){c=c.VAL;var a=b("gkx")("1224637");return a&&!(b("cr:1780086")==null)?i.jsx(b("cr:1780086").make,{pos:u,items:c,managePageMessagesLink:p,dispatch:function(a){return f(a)},setCovidSheet:e,buildSharedMediaViewerURL:n},String(d)):i.jsx(b("MWChatMessageList.bs").make,{pos:u,items:c,managePageMessagesLink:p,dispatch:function(a){return f(a)},setCovidSheet:e,buildSharedMediaViewerURL:n,messageElementRefs:b("MWMessageElementRefList.bs").make(void 0)},String(d))}),y;if(c.length!==1)y=!1;else{c=c[0];y=c.VAL.length===0}c=b("MWChatViewerChatVisibilityHook")();w=!w||g;g=!w;return i.jsx(b("VideoAutoplayLocalScopeProvider.react"),{children:i.jsxs(b("MWChatConversationScroller_DEPRECATED.bs").make,{children:[w?a!==void 0?i.jsx(b("LSContextBanner.bs").make,{thread:a}):null:i.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{}),i.jsx("div",{ref:l,className:(h||(h=b("stylex")))(k.spacer,b("MWTheme.bs").isGradient(s)?k.mask:!1)}),!g&&o?i.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{inline:!0}):null,y?null:i.jsx(b("MWChatMessageTableFocusTable.bs").keyCommands,{children:i.jsx(b("MWChatMessageTableFocusTable.bs").Table_.Table.make,{tabScopeQuery:b("focusScopeQueries").tabbableScopeQuery,wrapX:!0,wrapY:!1,allowModifiers:!0,children:i.jsx(b("BaseHeadingContextWrapper.re").make,{children:i.jsx("div",{children:x,"aria-label":j,role:"grid"})})})}),c?i.jsx(b("cr:1780087").make,{}):null,i.jsx(b("MWUIQuickReplies.bs").make,{})],boundingClientRectRef:t[1],isScrolledToBottomRef:d,dispatch:function(a){switch(a){case 0:return f("ContentDoesNotFillContainer");case 1:return f("ScrollToBottom");case 2:return f("ScrollToTop")}},hasMoreAfter:!1,ref:m}),autoplayLocalRules:v})}e=b("cr:1780087");g=a;f.messagesFbt=j;f.styles=k;f.VideoAutoplayLocalScopeProvider=c;f.VideoPlayerAutoplayRulesProvider=d;f.$ChatGeminiMessageList$OR$null$requireCond=b("cr:1780086");f.$ChatGeminiTypingIndicators$OR$MWChatTypingIndicators$requireCond=b("cr:1780087");f.TypingIndicators=e;f.make=g}),null);
__d("WorkGardenLowerProductName",[],(function(a,b,c,d,e,f){a=Object.freeze({PRODUCT_NAME:"hub"});e.exports=a}),null);
__d("WorkGardenLowerProductName$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a={hub:"hub"};e.exports=a}),null);
__d("MWUIDisabledPageComposer.bs",["requireCond","cr:1772081"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1772081").make;f.$LSDisabledPageComposer$OR$MWChatDisabledPageComposer$requireCond=b("cr:1772081");f.make=a}),null);
__d("MWChatTabContent.bs",["bs_curry","React","MWTheme.bs","SkytaleDB","bs_caml_int64","JSResource","bs_caml_option","MWThreadKey.bs","MWChatThread.bs","SkytaleDBHook.bs","MWChatComposer.bs","SkytaleDBQuery.bs","MWUIThreadEmoji.bs","LSThreadNullstate.bs","MessengerWebEvent","BootloaderResource","LSNullstateCTAType.bs","MWChatUserComposer.bs","MWChatEmptyComposer.bs","MWChatSolidReaction.bs","MWChatTabContentStyles.bs","MWChatLeftGroupComposer.bs","MWUIDisabledPageComposer.bs","MWChatThreadAnimationWrapper.bs","MWChatWorkDeactivatedComposer.bs","MessengerWebStgTypedLoggerLite.bs","SkytaleDBQuerySubscriptionHook.bs","MWChatComposerP2PPopoverTrigger.bs","MWChatWorkGardenArchivedComposer.bs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=(g=b("JSResource"))("MWChatBlockedComposer.bs").__setRef("MWChatTabContent.bs");function j(a,c,d,e,f){f={fbid:a,reportingToken:c};d!==void 0&&(f.size=b("bs_caml_option").valFromOption(d));e!==void 0&&(f.isReachable=b("bs_caml_option").valFromOption(e));return f}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}var l={reasonResource:i,makeProps:j,make:k},m=g("MWChatBlockedPageComposer.bs").__setRef("MWChatTabContent.bs");function a(a,b,c){return{fbid:a,reportingToken:b}}function n(a){return h.createElement(b("BootloaderResource").read(m).make,a)}a={reasonResource:m,makeProps:a,make:n};var o=g("MWChatWorkMessageRequestComposer.bs").__setRef("MWChatTabContent.bs");function c(a,b){return{closeTab:a}}function p(a){return h.createElement(b("BootloaderResource").read(o).make,a)}c={reasonResource:o,makeProps:c,make:p};var q=g("InternalOnlyWorkChatComposerExtras.bs").__setRef("MWChatTabContent.bs");function d(a){return{}}function r(a){return h.createElement(b("BootloaderResource").read(q).make,a)}g={reasonResource:q,makeProps:d,make:r};function s(a){var c=a.id,d=a.thread,e=a.items,f=a.otherUserFbid,g=a.welcomePageData,i=a.isTabFocused,l=a.isScrolledToBottomRef,m=a.initialComposerViewState,o=a.scrollerRef,q=a.shouldShowMenu,s=a.composerType,t=a.dispatch,u=a.closeTab,v=a.endFirstChatTabOpenLoggerRef,w=a.managePageMessagesLink,x=a.hasContent,y=a.repliedToMessage,z=a.buildSharedMediaViewerURL,A=a.messageRequestInfoText,B=a.sendTypingIndicator,C=a.closeReplyPreview,D=a.onSendMessage,E=b("MWTheme.bs").useTheme(void 0);a=b("MWChatSolidReaction.bs").useUook(void 0);var F=a[1],G;if(typeof s==="number")switch(s){case 0:case 1:case 7:G=!0;break;default:G=!1}else switch(s.TAG|0){case 0:case 1:G=!1;break;default:G=!1}h.useEffect(function(){if(!v.current){v.current=!0;var a;if(typeof c==="string")a=null;else{var d=c.NAME;a=d==="User"||d==="Page"?c.VAL:null}b("MessengerWebStgTypedLoggerLite.bs").log({event_name:b("MessengerWebEvent").RENDER_FIRST_THREAD_CONTENT,other_user_fbid:a,thread_fbid:typeof c==="string"||c.NAME!=="Group"?null:c.VAL})}},[v,c]);var H=function(a){if(l.current!==0)return;a=o.current;if(!(a==null))return a.scrollToBottom()},I=function(a){return H(void 0)},J=function(a){return H(void 0)},K=b("SkytaleDBHook.bs").useHook(void 0),L=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(K,"thread_nullstate").asc,{hd:d.a,tl:0})},[K,JSON.stringify(d.a)])),M=b("SkytaleDBQuerySubscriptionHook.bs").useArray(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(K,"thread_nullstate_ctas").index("threadKeyCtaId").asc,{hd:d.a,tl:0})},[K,JSON.stringify(d.a)])),N=b("bs_caml_int64").neq(d.i,b("bs_caml_int64").zero),O=L!==void 0?b("bs_caml_int64").eq(L.f,b("LSNullstateCTAType.bs").getStarted):!1;return h.jsx(b("MWChatThreadAnimationWrapper.bs").make,{composer:function(a,e,g,l){var o=b("bs_curry")._1(b("MWUIThreadEmoji.bs").useEmoji,void 0);o={color:b("MWTheme.bs").bottom(E),otherUserFbid:f,customLikeEmoji:o,isTabFocused:i,shouldShowMenu:q,hasContent:x,repliedToMessage:y,actionTrayOpen:l,closeActionTray:e,onContentsChange:I,onFileUploadStart:J,openActionTray:a,fileUploadHandlerRef:g,closeReplyPreview:C,openTabFromPreview:function(a){return t("OpenTabFromPreview")},closeTab:u,onSendMessage:D};m!==void 0&&(o.initialComposerViewState=b("bs_caml_option").valFromOption(m));A!==void 0&&(o.messageRequestInfoText=b("bs_caml_option").valFromOption(A));B!==void 0&&(o.onTypingStateChanged=b("bs_caml_option").valFromOption(B));var v=h.jsx(b("MWChatComposer.bs").make,o),w;if(O&&!N)w=null;else if(typeof s==="number")switch(s){case 0:w=v;break;case 1:w=h.jsx(b("MWChatUserComposer.bs").make,{threadId:c,chatComposer:function(a){return v}});break;case 2:w=h.jsx(b("MWUIDisabledPageComposer.bs").make,{});break;case 3:w=h.jsx(b("MWChatLeftGroupComposer.bs").make,{});break;case 4:w=h.jsx(h.Suspense,{children:h.jsx(p,{closeTab:u}),fallback:null});break;case 5:w=h.jsx(b("MWChatWorkDeactivatedComposer.bs").make,{});break;case 6:w=h.jsx(b("MWChatWorkGardenArchivedComposer.bs").make,{});break;case 7:w=h.jsxs(h.Fragment,{children:[h.jsx(h.Suspense,{children:h.jsx(r,{}),fallback:null}),v]});break;case 8:w=h.jsx(b("MWChatEmptyComposer.bs").make,{});break}else switch(s.TAG|0){case 0:w=h.jsx(h.Suspense,{children:h.jsx(k,j(s.otherUserFbid,s.reportingToken,void 0,void 0,void 0)),fallback:null});break;case 1:w=h.jsx(h.Suspense,{children:h.jsx(n,{fbid:s.otherUserFbid,reportingToken:s.reportingToken}),fallback:null});break;case 2:w=null;break}return h.jsxs(h.Fragment,{children:[L!==void 0&&!N?h.jsx(b("LSThreadNullstate.bs").make,{thread:d,nullstate:L,nullstateCtas:M}):null,w]})},threadView:function(a){return h.jsx(b("MWChatThread.bs").make,{id:c,items:e,isScrolledToBottomRef:l,setCovidSheet:F,dispatch:t,welcomePageData:g,managePageMessagesLink:w,spacerRef:a,scrollerRef:o,buildSharedMediaViewerURL:z})},animationEnabled:G,ensureScrolledToBottom:H,covidSheet:a[0],mediaDropDisabled:!(s===0||s===7),id:c,contextBannerData:1,welcomePageData:g,shouldInitiallyOpenActionTray:b("MWChatComposerP2PPopoverTrigger.bs").shouldShowOnLoad(c),senderUnsendNUXEnabled:i})}d={make:s};function e(a){var c=a.id,d=a.items,e=a.otherUserFbid,f=a.welcomePageData,g=a.isTabFocused,i=a.isScrolledToBottomRef,j=a.initialComposerViewState,k=a.scrollerRef,l=a.shouldShowMenu,m=a.composerType,n=a.dispatch,o=a.closeTab,p=a.endFirstChatTabOpenLoggerRef,q=a.managePageMessagesLink,r=a.hasContent,t=a.repliedToMessage,u=a.buildSharedMediaViewerURL,v=a.messageRequestInfoText,w=a.sendTypingIndicator,x=a.closeReplyPreview;a=a.onSendMessage;var y=b("SkytaleDBHook.bs").useHook(void 0),z=b("MWThreadKey.bs").useIdMemoizedExn(void 0),A=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(y,"threads").asc,{hd:z,tl:0})},[y,z]));if(A===void 0)return null;c={id:c,thread:A,items:d,otherUserFbid:e,welcomePageData:f,isTabFocused:g,isScrolledToBottomRef:i,scrollerRef:k,shouldShowMenu:l,composerType:m,dispatch:n,closeTab:o,endFirstChatTabOpenLoggerRef:p,managePageMessagesLink:q,hasContent:r,repliedToMessage:t,buildSharedMediaViewerURL:u,closeReplyPreview:x,onSendMessage:a};j!==void 0&&(c.initialComposerViewState=b("bs_caml_option").valFromOption(j));v!==void 0&&(c.messageRequestInfoText=b("bs_caml_option").valFromOption(v));w!==void 0&&(c.sendTypingIndicator=b("bs_caml_option").valFromOption(w));return h.jsx(s,c)}var t=b("MWChatTabContentStyles.bs").styles;e=e;f.MWChatBlockedComposerLazy=l;f.MWChatBlockedPageComposerLazy=a;f.MWChatWorkMessageRequestComposerLazy=c;f.InternalOnlyWorkChatComposerExtrasLazy=g;f.styles=t;f.Inner=d;f.make=e}),null);